!function(e){e.fn.caret=function(e){var t=this[0],n="true"===t.contentEditable;if(0==arguments.length){if(window.getSelection){if(n){t.focus();var o=window.getSelection().getRangeAt(0),c=o.cloneRange();return c.selectNodeContents(t),c.setEnd(o.endContainer,o.endOffset),c.toString().length}return t.selectionStart}if(document.selection){if(t.focus(),n){var o=document.selection.createRange(),c=document.body.createTextRange();return c.moveToElementText(t),c.setEndPoint("EndToEnd",o),c.text.length}var e=0,r=t.createTextRange(),c=document.selection.createRange().duplicate(),a=c.getBookmark();for(r.moveToBookmark(a);0!==r.moveStart("character",-1);)e++;return e}return t.selectionStart?t.selectionStart:0}if(-1==e&&(e=this[n?"text":"val"]().length),window.getSelection)n?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e);else if(document.body.createTextRange)if(n){var r=document.body.createTextRange();r.moveToElementText(t),r.moveStart("character",e),r.collapse(!0),r.select()}else{var r=t.createTextRange();r.move("character",e),r.select()}return n||t.focus(),e}}(jQuery);